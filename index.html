<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zhdanov Portfolio</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;600;800&family=Syne:wght@700;800&family=Archivo+Black&family=Fira+Code:wght@600&display=swap"
        rel="stylesheet">

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <link rel="stylesheet" href="style.css">
</head>

<body>

    <nav>
        <div class="headline-nav">
            Designer, 3D Generalist<br>& Developer
        </div>
        <div class="nav-menu">
            <a href="#">Work</a>
            <a href="#">Blog</a>
            <a href="#">About</a>
            <a href="#">Contact</a>
        </div>
    </nav>

    <div class="hero">
        <div class="carousel-section">
            <div class="project-card card-design">
                <div class="typing-wrapper">
                    <span class="card-label static-text">Design</span>
                    <span class="card-label typing-text">Design</span>
                </div>
            </div>
            <div class="project-card card-3d">
                <div class="spinner-wrapper">
                    <div class="layer">3D</div>
                    <div class="layer">3D</div>
                    <div class="layer">3D</div>
                    <div class="layer">3D</div>
                    <div class="layer">3D</div>
                    <div class="layer">3D</div>
                    <div class="layer">3D</div>
                    <div class="layer">3D</div>
                </div>
            </div>
            <div class="project-card card-tech">
                <span class="card-label">
                    <span class="tech-brackets">&lt;</span><span class="tech-content">Tech</span><span
                        class="tech-brackets">/&gt;</span>
                </span>
            </div>
        </div>

        <!-- Large Title (Wrapped for Glitch Effect) -->
        <div class="large-title-container" id="titleContainer">
            <div class="glitch-title-wrapper" id="titleWrapper">
                <h1 class="large-title main-title-layer">EVGENII ZHDANOV</h1>
                <!-- Slices for Distortion -->
                <h1 class="large-title title-slice slice-1">EVGENII ZHDANOV</h1>
                <h1 class="large-title title-slice slice-2">EVGENII ZHDANOV</h1>
                <h1 class="large-title title-slice slice-3">EVGENII ZHDANOV</h1>
            </div>
        </div>
    </div>

    <!-- Black Overlay / Footer -->
    <div class="curtain">
        <div class="flower-wrapper flower-center-target">
            <div class="glitch-layer layer-red"></div>
            <div class="glitch-layer layer-green"></div>
            <div class="glitch-layer layer-blue"></div>
            <img src="Logotype_White.png" class="logo-main" alt="Logotype White">
        </div>
    </div>

    <script>
        window.addEventListener('load', () => {
            let isIntroComplete = false;
            const tl = gsap.timeline({ defaults: { ease: "power3.out" } });

            // Intro Animation
            // Mobile Check for Footer Position
            const isMobile = window.innerWidth <= 768;
            const footerTop = isMobile ? "85vh" : "65vh"; // Desktop restored to 65vh
            const footerHeight = isMobile ? "15vh" : "35vh"; // Desktop restored to 35vh

            tl.to(".curtain", {
                height: footerHeight,
                top: footerTop,
                duration: 1.6,
                ease: "power4.inOut",
                delay: 0.2
            })
                .to(".flower-center-target", {
                    scale: 0.8,
                    opacity: 0.8,
                    duration: 1.6
                }, "<")

                .to(".project-card", { y: 0, opacity: 1, duration: 1, stagger: 0.15 }, "-=0.8")
                // Reveal ALL title layers together (opacity handled by slice logic later)
                .to([".main-title-layer", ".title-slice"], { y: 0, opacity: 1, duration: 1.2, stagger: 0 }, "-=0.8")
                // But hide slices again immediately after intro, ready for interaction
                .set(".title-slice", { opacity: 0 })
                .to(".nav-menu a", { x: 0, opacity: 1, stagger: 0.1, duration: 0.8 }, "-=1.0")
                .call(() => { isIntroComplete = true; });


            // --- 1. FOOTER LOGO INTERACTION ---
            const footer = document.querySelector('.curtain');
            const logoWrapper = document.querySelector('.flower-wrapper');
            const layerRed = document.querySelector('.layer-red');
            const layerGreen = document.querySelector('.layer-green');
            const layerBlue = document.querySelector('.layer-blue');
            let logoTimer;

            footer.addEventListener('mousemove', (e) => {
                if (!isIntroComplete) return;
                clearTimeout(logoTimer);
                logoWrapper.classList.add('is-glitching-logo');

                const rect = logoWrapper.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                const shiftX = ((e.clientX - centerX) / window.innerWidth) * 30;
                const shiftY = ((e.clientY - centerY) / window.innerHeight) * 30;

                gsap.to(layerRed, { x: -shiftX, y: -shiftY, opacity: 1, duration: 0.1, overwrite: 'auto' });
                gsap.to(layerBlue, { x: shiftX, y: shiftY, opacity: 1, duration: 0.1, overwrite: 'auto' });
                gsap.to(layerGreen, { x: shiftX * 0.4, y: shiftY * 0.4, opacity: 1, duration: 0.1, overwrite: 'auto' });

                logoTimer = setTimeout(() => {
                    logoWrapper.classList.remove('is-glitching-logo');
                    gsap.to([layerRed, layerBlue, layerGreen], { x: 0, y: 0, opacity: 0, duration: 0.4 });
                }, 150);
            });


            // --- 2. MAIN TITLE GLITCH & 3D INTERACTION ---
            const titleContainer = document.getElementById('titleContainer'); // The interactive area
            const titleWrapper = document.getElementById('titleWrapper'); // The 3D Object
            const slice1 = document.querySelector('.slice-1');
            const slice2 = document.querySelector('.slice-2');
            const slice3 = document.querySelector('.slice-3');
            let titleTimer;

            // Use the whole hero section or just the bottom half for title interaction
            // Let's use window to ensure "longer distance" feel, or just the container + buffer
            // Use the wrapper (text only) for interaction
            titleWrapper.addEventListener('mousemove', (e) => {
                clearTimeout(titleTimer);
                titleWrapper.classList.add('is-glitching');

                // Calculate Center of Title
                const rect = titleWrapper.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;

                // Distance from center
                const dx = e.clientX - centerX;
                const dy = e.clientY - centerY;

                // 1. 3D Tilt (Perspective)
                // Max tilt roughly 15 degrees
                const tiltY = (dx / window.innerWidth) * 20;
                const tiltX = -(dy / window.innerHeight) * 20;

                gsap.to(titleWrapper, {
                    rotateY: tiltY,
                    rotateX: tiltX,
                    duration: 0.2,
                    overwrite: 'auto'
                });

                // 2. Glitch Slices (Slit-Scan)
                const shiftFactor = 25; // Pixels max shift

                gsap.to(slice1, { x: -dx * 0.02, opacity: 1, duration: 0.1, overwrite: 'auto' });
                gsap.to(slice2, { x: dx * 0.015, opacity: 1, duration: 0.1, overwrite: 'auto' });
                gsap.to(slice3, { x: -dx * 0.03, opacity: 1, duration: 0.1, overwrite: 'auto' });

                // Stop Logic (still needed for pause within box)
                titleTimer = setTimeout(() => {
                    titleWrapper.classList.remove('is-glitching');
                    gsap.to(titleWrapper, { rotateY: 0, rotateX: 0, duration: 0.5, ease: "power2.out" });
                    gsap.to([slice1, slice2, slice3], { x: 0, opacity: 0, duration: 0.5, ease: "power2.out" });
                }, 100);
            });

            // Force reset on leave
            titleWrapper.addEventListener('mouseleave', () => {
                clearTimeout(titleTimer);
                titleWrapper.classList.remove('is-glitching');
                gsap.to(titleWrapper, { rotateY: 0, rotateX: 0, duration: 0.5, ease: "power2.out" });
                gsap.to([slice1, slice2, slice3], { x: 0, opacity: 0, duration: 0.5, ease: "power2.out" });
            });
        });
    </script>
</body>

</html>